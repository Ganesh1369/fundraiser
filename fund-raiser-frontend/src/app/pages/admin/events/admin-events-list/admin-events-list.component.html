<div class="admin-dashboard">
    <!-- Sidebar -->
    <aside class="sidebar dark">
        <div class="sidebar-header">
            <a routerLink="/" class="logo">
                <span class="logo-icon">ğŸ”¥</span>
                <span class="logo-text">Fund<span class="text-gold">Raiser</span></span>
            </a>
            <span class="admin-badge">Admin</span>
        </div>
        <nav class="sidebar-nav">
            <a class="nav-item" routerLink="/admin" [queryParams]="{tab: 'dashboard'}">
                <span class="nav-icon">ğŸ“Š</span>
                Dashboard
            </a>
            <a class="nav-item active" routerLink="/admin/events">
                <span class="nav-icon">ğŸ“…</span>
                Events
            </a>
            <a class="nav-item" routerLink="/admin" [queryParams]="{tab: 'registrations'}">
                <span class="nav-icon">ğŸ‘¥</span>
                Registrations
            </a>
            <a class="nav-item" routerLink="/admin" [queryParams]="{tab: 'donations'}">
                <span class="nav-icon">ğŸ’°</span>
                Donations
            </a>
            <a class="nav-item" routerLink="/admin" [queryParams]="{tab: 'leaderboard'}">
                <span class="nav-icon">ğŸ†</span>
                Leaderboard
            </a>
            <a class="nav-item" routerLink="/admin" [queryParams]="{tab: 'certificates'}">
                <span class="nav-icon">ğŸ“„</span>
                Certificates
            </a>
        </nav>
        <div class="sidebar-footer">
            <button class="logout-btn" (click)="logout()">
                <span>ğŸšª</span> Logout
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <header class="admin-header">
            <div class="header-row">
                <h1>Events Management</h1>
                <button routerLink="/admin/events/new" class="btn btn-primary">
                    + Create New Event
                </button>
            </div>
        </header>

        <div class="card">
            <!-- Loading -->
            @if (loading) {
            <div class="loading-state">
                <div class="spinner"></div>
            </div>
            }

            <!-- Table -->
            @if (!loading) {
            <div class="table-wrapper">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Event Name</th>
                            <th>Date</th>
                            <th>Type</th>
                            <th>Status</th>
                            <th>Registrations</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        @for (event of events; track event.id) {
                        <tr>
                            <td>
                                <div class="event-name">{{ event.event_name }}</div>
                                <div class="event-location">{{ event.event_location }}</div>
                            </td>
                            <td>{{ formatDate(event.event_date) }}</td>
                            <td><span class="badge event-type">{{ event.event_type }}</span></td>
                            <td>
                                <span class="status-badge"
                                    [ngClass]="event.registration_open ? 'status-open' : 'status-closed'">
                                    {{ event.registration_open ? 'Open' : 'Closed' }}
                                </span>
                            </td>
                            <td class="count-cell">{{ event.registration_count || 0 }}</td>
                            <td class="action-cell">
                                <a [routerLink]="['/admin/events', event.id]" class="btn-action view">View</a>
                                <button (click)="toggleStatus(event)" class="btn-action toggle">
                                    {{ event.registration_open ? 'Close' : 'Open' }}
                                </button>
                            </td>
                        </tr>
                        }
                    </tbody>
                </table>
                @if (events.length === 0) {
                <div class="empty-state">
                    <span class="empty-icon">ğŸ“…</span>
                    <h3>No Events Found</h3>
                    <p>Create your first event to get started.</p>
                </div>
                }
            </div>
            }
        </div>
    </main>
</div>
