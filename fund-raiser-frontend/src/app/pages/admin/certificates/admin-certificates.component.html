<header class="admin-header">
    <h1>80G Certificates</h1>
</header>

<div class="card">
    @if (certificates.length === 0) {
    <div class="empty-state">
        <lucide-icon name="file-text" class="empty-icon w-10 h-10"></lucide-icon>
        <h3>No Certificate Requests</h3>
        <p>When organizations request 80G certificates, they will appear here.</p>
    </div>
    } @else {
    <div class="table-wrapper">
        <table class="data-table">
            <thead>
                <tr>
                    <th>User</th>
                    <th>Email</th>
                    <th>PAN</th>
                    <th>Donation</th>
                    <th>Requested</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                @for (cert of certificates; track cert.id) {
                <tr>
                    <td>{{ cert.userName }}</td>
                    <td>{{ cert.userEmail }}</td>
                    <td class="pan-cell">{{ cert.panNumber }}</td>
                    <td class="amount">{{ cert.donationAmount ? formatCurrency(cert.donationAmount) : '-' }}</td>
                    <td>{{ formatDate(cert.requestedAt) }}</td>
                    <td><span class="status-badge" [ngClass]="getCertStatusClass(cert.status)">{{ cert.status }}</span></td>
                    <td class="action-cell">
                        @if (cert.status === 'pending') {
                        <button class="btn-action approve"
                            (click)="updateCertificateStatus(cert.id, 'approved')"><lucide-icon name="check" class="w-3.5 h-3.5 inline-block"></lucide-icon> Approve</button>
                        <button class="btn-action reject"
                            (click)="updateCertificateStatus(cert.id, 'rejected')"><lucide-icon name="circle-x" class="w-3.5 h-3.5 inline-block"></lucide-icon> Reject</button>
                        } @else if (cert.status === 'approved') {
                        <span class="action-status approved"><lucide-icon name="check" class="w-3.5 h-3.5 inline-block"></lucide-icon> Approved</span>
                        } @else if (cert.status === 'rejected') {
                        <span class="action-status rejected"><lucide-icon name="circle-x" class="w-3.5 h-3.5 inline-block"></lucide-icon> Rejected</span>
                        } @else {
                        <span class="action-status processing"><lucide-icon name="clock" class="w-3.5 h-3.5 inline-block"></lucide-icon> Processing</span>
                        }
                    </td>
                </tr>
                }
            </tbody>
        </table>
    </div>
    }
</div>
